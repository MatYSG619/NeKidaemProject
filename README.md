# NeKidaemProject

## Описание

Реализация Rest API для блога со статьями

##### Функциональные требования:

- Добавление пользователей через панель администратора.
- При создании пользователя автоматически создается персональный блог.
- Пост в блоге элементарная запись (заголовок, текст, дата создания).
- Пользователь может подписываться/отписываться на другие блоги пользователей.
- Персональная лента с пагинацией 10 статей и не более 500 статьями.
- При удалении/добавлении поста лента должна изменяться.
- Раз в сутки на почту должна приходить подборка из 5 последних статей ленты

## Версия Python

Python 3.10

## Установка

```console
git clone https://github.com/MatYSG619/NeKidaemProject

cd NeKidaemProject
```

В корне проекта создать файл configure.py.<br>
Создать переменную SQL_PASSWORD = '<Ваш пароль от PostgreSQL>'

```console
pip install -r requirenments.txt

python manage.py migrate

python manage.py runserver
```

## API

### Просмотр всех статей

##### REQUEST

|type|url|
|---|---|
|GET|/api/articles/|

##### RETURN

```json
{
    "count": 16,
    "next": "http://127.0.0.1:8000/api/articles/?limit=10&offset=10",
    "previous": null,
    "results": [
        {
            "id": 1,
            "title": "Программирование на Python",
            "text": "В этой статье я расскажу почему программирование на Python так актуально",
            "created": "2022-05-18T18:09:24.795473+03:00",
            "author": {
                "id": 1,
                "username": "admin"
            }
        },
        {
            "id": 2,
            "title": "ИИ в медицине",
            "text": "Всем привет, это статья посвящена ИИ в медицине.",
            "created": "2022-05-18T18:12:07.262014+03:00",
            "author": {
                "id": 2,
                "username": "Nina"
            }
        },
        {
            "id": 3,
            "title": "Создание блога на Django",
            "text": "Сегодня мы поговорим с вами о Django и создадим свой первый сайт",
            "created": "2022-05-18T18:13:07.817968+03:00",
            "author": {
                "id": 3,
                "username": "Rita"
            }
        },
        {
            "id": 4,
            "title": "Плюсы и минусы курсов",
            "text": "Сегодня мы рассмотрим с вами плюсы и минусы курсов",
            "created": "2022-05-18T18:14:34.493672+03:00",
            "author": {
                "id": 4,
                "username": "Masha"
            }
        },
        {
            "id": 5,
            "title": "Сложности программистов",
            "text": "Сегодня я расскажу Вам о сложностях, с которыми Вам придется столкнуться при обучении на программиста",
            "created": "2022-05-18T18:15:36.671042+03:00",
            "author": {
                "id": 5,
                "username": "Dima"
            }
        },
        {
            "id": 8,
            "title": "Вторая запись",
            "text": "Текст для второй записи",
            "created": "2022-05-18T18:29:44.732108+03:00",
            "author": {
                "id": 1,
                "username": "admin"
            }
        },
        {
            "id": 9,
            "title": "Третья запись",
            "text": "Текст для третьей записи",
            "created": "2022-05-18T18:31:01.845729+03:00",
            "author": {
                "id": 1,
                "username": "admin"
            }
        },
        {
            "id": 10,
            "title": "Вторая статья Димы",
            "text": "Текст второй статьи Димы",
            "created": "2022-05-18T20:58:31.536680+03:00",
            "author": {
                "id": 5,
                "username": "Dima"
            }
        },
        {
            "id": 11,
            "title": "Третья статья Димы",
            "text": "Текст для третьей статьи Димы",
            "created": "2022-05-18T20:59:02.501224+03:00",
            "author": {
                "id": 5,
                "username": "Dima"
            }
        },
        {
            "id": 12,
            "title": "Четвертая статья Димы",
            "text": "Текст для четвертой статьи Димы",
            "created": "2022-05-18T20:59:29.124665+03:00",
            "author": {
                "id": 5,
                "username": "Dima"
            }
        }
    ]
}
```

### Добавление статьи

##### REQUEST

|type|url| json exempel                                                              |
|---|---|---------------------------------------------------------------------------|
|POST|/api/articles/add/| {"article": {"title": "Вторая запись","text": "Текст для второй записи"}} |

##### RETURN

```json
{
    "success": "Article created successfully"
}
```
### История прочитанных статей

##### REQUEST

|type| url                    |
|---|------------------------|
|GET| /api/articles/history/ |

##### RETURN
```json
{
    "articles": [
        {
            "id": 2,
            "title": "ИИ в медицине",
            "text": "Всем привет, это статья посвящена ИИ в медицине.",
            "created": "2022-05-18T18:12:07.262014+03:00",
            "author": {
                "id": 2,
                "username": "Nina"
            }
        },
        {
            "id": 3,
            "title": "Создание блога на Django",
            "text": "Сегодня мы поговорим с вами о Django и создадим свой первый сайт",
            "created": "2022-05-18T18:13:07.817968+03:00",
            "author": {
                "id": 3,
                "username": "Rita"
            }
        },
        {
            "id": 4,
            "title": "Плюсы и минусы курсов",
            "text": "Сегодня мы рассмотрим с вами плюсы и минусы курсов",
            "created": "2022-05-18T18:14:34.493672+03:00",
            "author": {
                "id": 4,
                "username": "Masha"
            }
        }
    ]
}
```

### Детальный просмотр статьи

##### REQUEST

| type | url                             | json params            | exempel          |
|------|---------------------------------|------------------------|------------------|
| GET  | /api/articles/<int:article_id>/ | article_id - id статьи| /api/articles/1/ |

##### RETURN

```json
{
    "article": {
        "id": 1,
        "title": "Программирование на Python",
        "text": "В этой статье я расскажу почему программирование на Python так актуально",
        "created": "2022-05-18T18:09:24.795473+03:00",
        "author": {
            "id": 1,
            "username": "admin"
        }
    }
}
```
### Отметка статьи прочитанной

##### REQUEST

| type | url                                  |json params| exemple               |
|------|--------------------------------------|-----------|-----------------------|
| GET  | /api/articles/<int:article_id>/read/ |article_id - id статьи| /api/articles/1/read/ |

##### RETURN
```json
{
    "success": "Статья успешно прочитана"
}
```
### Получение персонального блога пользователя

##### REQUEST

| type | url                      | json params        | exemple      |
|------|--------------------------|--------------------|--------------|
| GET  | /api/blog/<int:blog_id>/ | blog_id - id блога | /api/blog/1/ |

##### RETURN

```json
{
    "blog": [
        {
            "id": 1,
            "name": "Блог admin",
            "author": {
                "id": 1,
                "username": "admin"
            }
        }
    ],
    "articles": [
        {
            "id": 1,
            "title": "Программирование на Python",
            "text": "В этой статье я расскажу почему программирование на Python так актуально",
            "created": "2022-05-18T18:09:24.795473+03:00"
        },
        {
            "id": 8,
            "title": "Вторая запись",
            "text": "Текст для второй записи",
            "created": "2022-05-18T18:29:44.732108+03:00"
        },
        {
            "id": 9,
            "title": "Третья запись",
            "text": "Текст для третьей записи",
            "created": "2022-05-18T18:31:01.845729+03:00"
        },
        {
            "id": 18,
            "title": "Пример",
            "text": "Текст для примера",
            "created": "2022-05-19T14:47:05.550184+03:00"
        }
    ]
}
```
### Подписка на персональный блог пользователя

##### REQUEST

| type | url                             | json params        | exempel             |
|------|---------------------------------|--------------------|---------------------|
| GET  | /api/blog/<int:blog_id>/follow/ | blog_id - id блога | /api/blog/2/follow/ |

##### RETURN

```json
{
    "success": "Вы успешно подписались на данного пользователя"
}
```
### Отписка от персонального блог пользователя

##### REQUEST

| type | url                               | json params        | exempel               |
|------|-----------------------------------|--------------------|-----------------------|
| GET  | /api/blog/<int:blog_id>/unfollow/ | blog_id - id блога | /api/blog/2/unfollow/ |

##### RETURN

```json
{
    "success": "Вы успешно отписались от этого пользователя"
}
```
### Персональная лента статей

##### REQUEST

| type | url             |
|------|-----------------|
| GET  | /api/following/ |

##### RETURN

```json
{
    "count": 11,
    "next": "http://127.0.0.1:8000/api/following/?limit=10&offset=10",
    "previous": null,
    "results": [
        {
            "id": 3,
            "title": "Создание блога на Django",
            "text": "Сегодня мы поговорим с вами о Django и создадим свой первый сайт",
            "created": "2022-05-18T18:13:07.817968+03:00",
            "author": {
                "id": 3,
                "username": "Rita"
            }
        },
        {
            "id": 4,
            "title": "Плюсы и минусы курсов",
            "text": "Сегодня мы рассмотрим с вами плюсы и минусы курсов",
            "created": "2022-05-18T18:14:34.493672+03:00",
            "author": {
                "id": 4,
                "username": "Masha"
            }
        },
        {
            "id": 5,
            "title": "Сложности программистов",
            "text": "Сегодня я расскажу Вам о сложностях, с которыми Вам придется столкнуться при обучении на программиста",
            "created": "2022-05-18T18:15:36.671042+03:00",
            "author": {
                "id": 5,
                "username": "Dima"
            }
        },
        {
            "id": 10,
            "title": "Вторая статья Димы",
            "text": "Текст второй статьи Димы",
            "created": "2022-05-18T20:58:31.536680+03:00",
            "author": {
                "id": 5,
                "username": "Dima"
            }
        },
        {
            "id": 11,
            "title": "Третья статья Димы",
            "text": "Текст для третьей статьи Димы",
            "created": "2022-05-18T20:59:02.501224+03:00",
            "author": {
                "id": 5,
                "username": "Dima"
            }
        },
        {
            "id": 12,
            "title": "Четвертая статья Димы",
            "text": "Текст для четвертой статьи Димы",
            "created": "2022-05-18T20:59:29.124665+03:00",
            "author": {
                "id": 5,
                "username": "Dima"
            }
        },
        {
            "id": 13,
            "title": "Вторая статья Риты",
            "text": "Текст для второй статьи Риты",
            "created": "2022-05-18T21:01:46.310781+03:00",
            "author": {
                "id": 3,
                "username": "Rita"
            }
        },
        {
            "id": 14,
            "title": "Третья статья Риты",
            "text": "Текст для третьей статьи Риты",
            "created": "2022-05-18T21:02:13.181586+03:00",
            "author": {
                "id": 3,
                "username": "Rita"
            }
        },
        {
            "id": 15,
            "title": "Четвертая статьи Риты",
            "text": "Текст для четвертой статьи Риты",
            "created": "2022-05-18T21:02:43.240643+03:00",
            "author": {
                "id": 3,
                "username": "Rita"
            }
        },
        {
            "id": 16,
            "title": "Вторая статья Маши",
            "text": "Текст второй статьи Маши",
            "created": "2022-05-18T21:04:16.624716+03:00",
            "author": {
                "id": 4,
                "username": "Masha"
            }
        }
    ]
}
```

### Пример отправки сообщения на почту
```console
Content-Type: text/plain; charset="utf-8"
MIME-Version: 1.0
Content-Transfer-Encoding: 8bit
Subject: New article
From: admin@test.ru
To: admin@test.ru
Date: Thu, 19 May 2022 11:10:10 -0000
Message-ID: <165295861089.27872.4006424371238632024@...>

Статьи
Автор: Rita
Название: Создание блога на Django
Текст: Сегодня мы поговорим с вами о Django и создадим свой первый сайт
Автор: Masha
Название: Плюсы и минусы курсов
Текст: Сегодня мы рассмотрим с вами плюсы и минусы курсов
Автор: Dima
Название: Сложности программистов
Текст: Сегодня я расскажу Вам о сложностях, с которыми Вам придется столкнуться при обучении на программиста
Автор: Dima
Название: Вторая статья Димы
Текст: Текст второй статьи Димы
Автор: Dima
Название: Третья статья Димы
Текст: Текст для третьей статьи Димы
```
